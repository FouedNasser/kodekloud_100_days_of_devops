# Day 44: Write a Docker Compose File

## Challenge Description
The Nautilus application development team shared static website content that needed to be hosted on an `httpd` web server using a containerized platform. We were tasked with setting up an environment on App Server 1 in Stratos DC according to specific guidelines. The requirements were to create a container named `httpd` using a `docker-compose.yml` file at `/opt/docker/`, map host port 6300 to container port 80, and mount the host volume `/opt/finance` to the container's document root `/usr/local/apache2/htdocs`.

## Key Concepts
*   **Docker Compose:** A tool for defining and running multi-container Docker applications. It uses a YAML file to configure the application's services, networks, and volumes.
*   **YAML (YAML Ain't Markup Language):** A human-readable data serialization standard that can be used in conjunction with all programming languages and is often used to write configuration files.
*   **Volume Mapping:** The mechanism to persist data generated by and used by Docker containers. It allows sharing files between the host machine and the container.

## Solution
To complete this task, we performed the following steps:

1.  **SSH into App Server 1:**
    We connected to `stapp01` using the `tony` user credentials.
    ```bash
    ssh tony@stapp01.stratos.xfusioncorp.com
    ```

2.  **Create the Docker Compose File:**
    We first ensured the directory existed and then created the `/opt/docker/docker-compose.yml` file with the required configuration.
    ```bash
    sudo mkdir -p /opt/docker
    sudo bash -c 'cat <<EOF > /opt/docker/docker-compose.yml
    version: "3.8"
    services:
      webserver:
        image: httpd:latest
        container_name: httpd
        ports:
          - "6300:80"
        volumes:
          - /opt/finance:/usr/local/apache2/htdocs
        restart: always
    EOF'
    ```
    *   `version: '3.8'`: Specifies the version of the Docker Compose file format.
    *   `services`: Defines the services to be run.
    *   `image: httpd:latest`: Uses the latest `httpd` image.
    *   `container_name: httpd`: Names the container `httpd`.
    *   `ports`: Maps host port 6300 to container port 80.
    *   `volumes`: Maps the host directory `/opt/finance` to the container directory `/usr/local/apache2/htdocs`.

3.  **Deploy the Service:**
    We navigated to the directory and started the container using Docker Compose.
    ```bash
    cd /opt/docker
    sudo docker compose up -d
    ```
    *   `up`: Builds, (re)creates, starts, and attaches to containers for a service.
    *   `-d`: Detached mode: Run containers in the background.

## Verification
To verify the deployment, we performed the following checks:

1.  **Check Running Containers:**
    We listed the running containers to confirm `httpd` was up and running with the correct port mapping.
    ```bash
    sudo docker ps
    ```
    We confirmed the output showed the container named `httpd` running on port `0.0.0.0:6300->80/tcp`.

2.  **Verify Web Server Access:**
    We verified that the web server was serving content on port 6300.
    ```bash
    curl http://localhost:6300
    ```
    The command returned the HTML content hosted in the `/opt/finance` directory, confirming the successful deployment and volume mapping.